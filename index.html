<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pour toi, Raissa ğŸŒ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Jost:wght@300;400&display=swap" rel="stylesheet">
<style>
  :root {
    --rose: #e8b4b8;
    --rose-deep: #c47d85;
    --cream: #fdf6f0;
    --warm: #f5e6d8;
    --text: #3a2a2a;
    --muted: #9a7070;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--cream);
    color: var(--text);
    font-family: 'Jost', sans-serif;
    font-weight: 300;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Petal rain */
  .petals {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  .petal {
    position: absolute;
    top: -30px;
    font-size: 1.2rem;
    opacity: 0;
    animation: fall linear infinite;
  }

  @keyframes fall {
    0% { opacity: 0; transform: translateY(0) rotate(0deg); }
    10% { opacity: 0.6; }
    90% { opacity: 0.4; }
    100% { opacity: 0; transform: translateY(110vh) rotate(360deg); }
  }

  /* Screens */
  .screen {
    display: none;
    position: relative;
    z-index: 1;
    min-height: 100vh;
    padding: 2rem;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    animation: fadeIn 0.8s ease both;
  }

  .screen.active { display: flex; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Decorative line */
  .deco {
    color: var(--rose-deep);
    letter-spacing: 0.3em;
    font-size: 0.7rem;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
    font-family: 'Jost', sans-serif;
  }

  h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.8rem, 8vw, 5rem);
    font-weight: 300;
    line-height: 1.1;
    color: var(--text);
    margin-bottom: 1.2rem;
  }

  h1 em {
    color: var(--rose-deep);
    font-style: italic;
  }

  p.lead {
    font-size: 1rem;
    color: var(--muted);
    max-width: 380px;
    line-height: 1.8;
    margin-bottom: 2.5rem;
  }

  /* Flower icon */
  .flower {
    font-size: 3rem;
    margin-bottom: 1.5rem;
    animation: sway 3s ease-in-out infinite;
  }

  @keyframes sway {
    0%, 100% { transform: rotate(-5deg); }
    50% { transform: rotate(5deg); }
  }

  /* Cards / Options */
  .options {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
    max-width: 400px;
    margin-bottom: 2rem;
  }

  .option-card {
    background: white;
    border: 1.5px solid var(--rose);
    border-radius: 16px;
    padding: 1rem 1.4rem;
    cursor: pointer;
    transition: all 0.25s ease;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .option-card:hover, .option-card.selected {
    background: var(--rose);
    border-color: var(--rose-deep);
    transform: translateX(6px);
  }

  .option-card.selected {
    background: linear-gradient(135deg, var(--rose), #f4c8cc);
  }

  .option-icon { font-size: 1.5rem; }

  .option-text h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.15rem;
    font-weight: 400;
    color: var(--text);
  }

  .option-text p {
    font-size: 0.78rem;
    color: var(--muted);
    margin-top: 2px;
  }

  /* Input fields */
  .input-group {
    width: 100%;
    max-width: 400px;
    margin-bottom: 1.2rem;
    text-align: left;
  }

  label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--muted);
    margin-bottom: 0.5rem;
  }

  input[type="text"], input[type="date"], select {
    width: 100%;
    padding: 0.9rem 1.2rem;
    border: 1.5px solid var(--rose);
    border-radius: 12px;
    background: white;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s;
  }

  input:focus, select:focus {
    border-color: var(--rose-deep);
  }

  /* Button */
  .btn {
    background: linear-gradient(135deg, var(--rose-deep), #d4959b);
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    font-family: 'Jost', sans-serif;
    font-size: 0.85rem;
    font-weight: 400;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(196, 125, 133, 0.3);
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(196, 125, 133, 0.45);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  /* Progress dots */
  .dots {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }

  .dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--rose);
    transition: all 0.3s;
  }

  .dot.active {
    background: var(--rose-deep);
    transform: scale(1.3);
  }

  /* Final screen */
  .summary-card {
    background: white;
    border-radius: 24px;
    padding: 2rem;
    max-width: 380px;
    width: 100%;
    box-shadow: 0 8px 40px rgba(196,125,133,0.15);
    margin-bottom: 2rem;
    text-align: left;
  }

  .summary-item {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    padding: 0.8rem 0;
    border-bottom: 1px solid var(--warm);
  }

  .summary-item:last-child { border-bottom: none; }

  .summary-icon { font-size: 1.3rem; }

  .summary-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--muted);
    margin-bottom: 3px;
  }

  .summary-value {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    color: var(--text);
  }

  .heart-burst {
    font-size: 4rem;
    animation: pulse 1.5s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); }
  }

  /* Divider */
  .divider {
    width: 60px;
    height: 1px;
    background: var(--rose);
    margin: 1.5rem auto;
  }

  /* Disclaimer pied de blessure */
  .note-pied {
    font-size: 0.8rem;
    color: var(--rose-deep);
    font-style: italic;
    font-family: 'Cormorant Garamond', serif;
    max-width: 300px;
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }

  /* Music button */
  .music-btn {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    z-index: 100;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: white;
    border: 1.5px solid var(--rose);
    color: var(--rose-deep);
    font-size: 1.3rem;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 16px rgba(196,125,133,0.2);
    transition: all 0.3s;
  }
  .music-btn:hover { transform: scale(1.1); }

  /* Play screen overlay */
  .play-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 2rem;
    text-align: center;
  }

  .play-circle {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--rose), #f4c8cc);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    cursor: pointer;
    box-shadow: 0 8px 30px rgba(196,125,133,0.35);
    transition: all 0.3s;
    animation: breathe 2.5s ease-in-out infinite;
  }

  .play-circle:hover { transform: scale(1.08); }

  @keyframes breathe {
    0%, 100% { box-shadow: 0 8px 30px rgba(196,125,133,0.35); }
    50% { box-shadow: 0 8px 50px rgba(196,125,133,0.6); }
  }

  .song-info {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    color: var(--muted);
    font-style: italic;
  }

</style>
</head>
<body>

<!-- Petal rain -->

<!-- Audio player -->
<audio id="bg-music" loop preload="auto">
  <source src="essence.mp3" type="audio/mpeg">
</audio>

<button class="music-btn" id="music-toggle" onclick="toggleMusic()" title="Musique">ğŸµ</button>

<div class="petals" id="petals"></div>

<!-- SCREEN 1 : Welcome -->
<!-- SCREEN 1 : Accueil avec musique -->
<div class="screen active" id="s1">
  <div class="flower">ğŸŒ¸</div>
  <div class="deco">âœ¦ Un message pour toi âœ¦</div>
  <h1>Bonjour,<br><em>Raissa</em></h1>
  <div class="divider"></div>

  <!-- Bouton Play -->
  <button class="btn" id="btn-play" onclick="startMusic()" style="background:white;color:var(--rose-deep);border:1.5px solid var(--rose);box-shadow:none;margin-bottom:0.8rem;">â–¶ Appuyer pour lire</button>
  <p id="song-label" style="font-family:'Cormorant Garamond',serif;font-style:italic;font-size:0.85rem;color:var(--muted);margin-bottom:1.5rem;min-height:1.2em;"></p>

  <!-- Bouton Continuer -->
  <button class="btn" onclick="goTo('s1b')">Continuer vers la surprise â†’</button>
</div>

<!-- SCREEN 1b : Message Raissa -->
<div class="screen" id="s1b">
  <div class="flower">ğŸŒ¸</div>
  <div class="deco">âœ¦ Un message pour toi âœ¦</div>
  <h1>Bonjour,<br><em>Raissa</em></h1>
  <div class="divider"></div>
  <p class="lead">Ces fleurs arrivent avec un peu de retard â€” mais les sentiments, eux, n'ont jamais attendu. J'ai quelque chose Ã  te proposerâ€¦</p>
  <p class="note-pied">ğŸ’› J'espÃ¨re que ton pied va mieux. Prends le temps qu'il te faut.</p>
  <button class="btn" onclick="goTo('s2')">Voir la surprise â†’</button>
</div>

<!-- SCREEN 2 : Date -->
<div class="screen" id="s2">
  <div class="dots">
    <div class="dot active"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <div class="deco">âœ¦ Ã‰tape 1 âœ¦</div>
  <h1>Choisir<br><em>le jour</em></h1>
  <p class="lead">Quand seras-tu disponible pour qu'on passe du bon temps ensemble ?</p>
  <div class="input-group">
    <label>La date idÃ©ale ğŸ“…</label>
    <input type="date" id="date-input">
  </div>
  <button class="btn" id="btn2" onclick="goTo('s3')" disabled>Continuer â†’</button>
</div>

<!-- SCREEN 3 : Ville -->
<div class="screen" id="s3">
  <div class="dots">
    <div class="dot"></div>
    <div class="dot active"></div>
    <div class="dot"></div>
  </div>
  <div class="deco">âœ¦ Ã‰tape 2 âœ¦</div>
  <h1>Choisir<br><em>le lieu</em></h1>
  <p class="lead">Dans quelle ville tu voudrais qu'on se retrouve ?</p>
  <div class="options" id="city-options">
    <div class="option-card" onclick="selectCity(this, 'Paris')">
      <span class="option-icon">ğŸ—¼</span>
      <div class="option-text">
        <h3>Paris</h3>
        <p>La ville lumiÃ¨re, pour une soirÃ©e inoubliable</p>
      </div>
    </div>
    <div class="option-card" onclick="selectCity(this, 'Limoges')">
      <span class="option-icon">ğŸŒ¿</span>
      <div class="option-text">
        <h3>Limoges</h3>
        <p>Cosy et intime, une belle soirÃ©e Ã  deux</p>
      </div>
    </div>
  </div>
  <button class="btn" id="btn3" onclick="goTo('s4')" disabled>Continuer â†’</button>
</div>

<!-- SCREEN 4 : ActivitÃ© -->
<div class="screen" id="s4">
  <div class="dots">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot active"></div>
  </div>
  <div class="deco">âœ¦ Ã‰tape 3 âœ¦</div>
  <h1>L'ambiance<br><em>du soir</em></h1>
  <p class="lead">Qu'est-ce qui te ferait le plus plaisir pour notre soirÃ©e ?</p>
  <div class="options" id="activity-options">
    <div class="option-card" onclick="selectActivity(this, 'Un cocktail & bonne ambiance ğŸ¹')">
      <span class="option-icon">ğŸ¹</span>
      <div class="option-text">
        <h3>Cocktails & ambiance</h3>
        <p>Un bar sympa oÃ¹ parler et rire</p>
      </div>
    </div>
    <div class="option-card" onclick="selectActivity(this, 'Un dÃ®ner + sortie aprÃ¨s ğŸŒ™')">
      <span class="option-icon">ğŸŒ™</span>
      <div class="option-text">
        <h3>DÃ®ner + soirÃ©e</h3>
        <p>On mange bien, puis on prolonge la nuit</p>
      </div>
    </div>
    <div class="option-card" onclick="selectActivity(this, 'Une soirÃ©e Netflix & dÃ©tente ğŸ¬')">
      <span class="option-icon">ğŸ¬</span>
      <div class="option-text">
        <h3>SoirÃ©e Netflix</h3>
        <p>Cozy, un bon film et toi â€” rien de mieux</p>
      </div>
    </div>
    <div class="option-card" onclick="selectActivity(this, 'Moi je dÃ©cide ğŸ˜')">
      <span class="option-icon">ğŸ˜</span>
      <div class="option-text">
        <h3>Moi je dÃ©cide</h3>
        <p>Fais-moi confiance, tu vas kiffer</p>
      </div>
    </div>
  </div>
  <button class="btn" id="btn4" onclick="handleActivity()" disabled>Continuer â†’</button>
</div>


<!-- SCREEN 4b : Questions bonus si "Moi je dÃ©cide" -->
<div class="screen" id="s4b">
  <div class="deco">âœ¦ Bonus âœ¦</div>
  <h1>Aide-moi Ã <br><em>te gÃ¢ter</em></h1>
  <p class="lead">Quelques petites questions pour que je puisse prÃ©parer quelque chose qui te ressemble vraiment ğŸŒ¸</p>

  <!-- Q1 : Humeur -->
  <div style="width:100%;max-width:400px;margin-bottom:1rem;text-align:left;">
    <label style="display:block;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:var(--muted);margin-bottom:0.6rem;">Ton Ã©nergie ce soir-lÃ  âš¡</label>
    <div class="options" id="q-energie">
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('energie', this, 'ReposÃ©e & dispo pour tout')"><span class="option-icon">ğŸ˜Š</span><div class="option-text"><h3>ReposÃ©e & dispo</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('energie', this, 'FatiguÃ©e, besoin de calme')"><span class="option-icon">ğŸ˜´</span><div class="option-text"><h3>FatiguÃ©e, besoin de calme</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('energie', this, 'MotivÃ©e, on sort !')"><span class="option-icon">ğŸ”¥</span><div class="option-text"><h3>MotivÃ©e, on sort !</h3></div></div>
    </div>
  </div>

  <!-- Q2 : Ambiance -->
  <div style="width:100%;max-width:400px;margin-bottom:1rem;text-align:left;">
    <label style="display:block;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:var(--muted);margin-bottom:0.6rem;">L'ambiance que tu prÃ©fÃ¨res ğŸ¶</label>
    <div class="options" id="q-ambiance">
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('ambiance', this, 'Calme & intime')"><span class="option-icon">ğŸ•¯ï¸</span><div class="option-text"><h3>Calme & intime</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('ambiance', this, 'AnimÃ©e & festive')"><span class="option-icon">ğŸ‰</span><div class="option-text"><h3>AnimÃ©e & festive</h3></div></div>
    </div>
  </div>

  <!-- Q3 : Cuisine -->
  <div style="width:100%;max-width:400px;margin-bottom:1rem;text-align:left;">
    <label style="display:block;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:var(--muted);margin-bottom:0.6rem;">Ta cuisine prÃ©fÃ©rÃ©e ğŸ½ï¸</label>
    <div class="options" id="q-cuisine">
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('cuisine', this, 'Africaine / antillaise')"><span class="option-icon">ğŸŒ</span><div class="option-text"><h3>Africaine / antillaise</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('cuisine', this, 'FranÃ§aise / europÃ©enne')"><span class="option-icon">ğŸ¥</span><div class="option-text"><h3>FranÃ§aise / europÃ©enne</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('cuisine', this, 'Asiatique')"><span class="option-icon">ğŸœ</span><div class="option-text"><h3>Asiatique</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('cuisine', this, 'Peu importe tout me plait')"><span class="option-icon">ğŸ˜‹</span><div class="option-text"><h3>Peu importe, tout me plaÃ®t !</h3></div></div>
    </div>
  </div>

  <!-- Q4 : ActivitÃ© soir -->
  <div style="width:100%;max-width:400px;margin-bottom:1.5rem;text-align:left;">
    <label style="display:block;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:var(--muted);margin-bottom:0.6rem;">Ce que tu adores faire le soir ğŸŒ™</label>
    <div class="options" id="q-soir">
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('soir', this, 'Regarder un film / sÃ©rie')"><span class="option-icon">ğŸ¬</span><div class="option-text"><h3>Film / sÃ©rie</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('soir', this, 'Sortir, explorer, bouger')"><span class="option-icon">ğŸš¶</span><div class="option-text"><h3>Sortir & explorer</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('soir', this, 'Manger & papoter')"><span class="option-icon">ğŸ’¬</span><div class="option-text"><h3>Manger & papoter</h3></div></div>
      <div class="option-card" style="padding:0.7rem 1.2rem" onclick="selectBonus('soir', this, 'Me dÃ©tendre, rien de prÃ©vu')"><span class="option-icon">ğŸ›‹ï¸</span><div class="option-text"><h3>Se dÃ©tendre</h3></div></div>
    </div>
  </div>

  <button class="btn" id="btn4b" onclick="goTo('s5')" disabled>Voir le rÃ©sultat â†’</button>
</div>

<!-- SCREEN 5 : Summary -->
<div class="screen" id="s5">
  <div class="heart-burst">ğŸ’—</div>
  <div class="deco">âœ¦ C'est notÃ© âœ¦</div>
  <h1>Notre<br><em>prochaine fois</em></h1>
  <div class="divider"></div>
  <div class="summary-card">
    <div class="summary-item">
      <span class="summary-icon">ğŸ“…</span>
      <div>
        <div class="summary-label">Le jour</div>
        <div class="summary-value" id="sum-date">â€”</div>
      </div>
    </div>
    <div class="summary-item">
      <span class="summary-icon">ğŸ“</span>
      <div>
        <div class="summary-label">La ville</div>
        <div class="summary-value" id="sum-city">â€”</div>
      </div>
    </div>
    <div class="summary-item">
      <span class="summary-icon">ğŸŒ™</span>
      <div>
        <div class="summary-label">L'ambiance</div>
        <div class="summary-value" id="sum-activity">â€”</div>
      </div>
    </div>
    <div id="sum-bonus" style="display:none">
      <div class="summary-item">
        <span class="summary-icon">âš¡</span>
        <div>
          <div class="summary-label">Ton Ã©nergie</div>
          <div class="summary-value" id="sum-energie">â€”</div>
        </div>
      </div>
      <div class="summary-item">
        <span class="summary-icon">ğŸ¶</span>
        <div>
          <div class="summary-label">Ambiance prÃ©fÃ©rÃ©e</div>
          <div class="summary-value" id="sum-ambiance">â€”</div>
        </div>
      </div>
      <div class="summary-item">
        <span class="summary-icon">ğŸ½ï¸</span>
        <div>
          <div class="summary-label">Ta cuisine</div>
          <div class="summary-value" id="sum-cuisine">â€”</div>
        </div>
      </div>
      <div class="summary-item">
        <span class="summary-icon">ğŸ›‹ï¸</span>
        <div>
          <div class="summary-label">Ce que t'aimes le soir</div>
          <div class="summary-value" id="sum-soir">â€”</div>
        </div>
      </div>
    </div>
  </div>
  <p class="lead">Merci Raissa ğŸŒ¸ Je m'occupe du reste. Ã€ trÃ¨s vite.</p>
  <button class="btn" onclick="restart()" style="background:white;color:var(--rose-deep);border:1.5px solid var(--rose);box-shadow:none;margin-top:0.5rem;">â†© Recommencer</button>
</div>

<script>

  // â”€â”€ Music â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let musicPlaying = false;
  const audio = document.getElementById('bg-music');

  function startMusic() {
    audio.play().then(() => {
      musicPlaying = true;
      document.getElementById('music-toggle').style.display = 'flex';
      document.getElementById('btn-play').textContent = 'â¸ En cours de lecture';
      document.getElementById('btn-play').onclick = toggleMusic;
      document.getElementById('song-label').textContent = 'âœ¦ Essence â€” Wizkid ft. Tems âœ¦';
    }).catch(() => {
      document.getElementById('song-label').textContent = 'âš  Fichier essence.mp3 introuvable';
    });
  }

  function toggleMusic() {
    if (musicPlaying) {
      audio.pause();
      musicPlaying = false;
      document.getElementById('music-toggle').textContent = 'ğŸ”‡';
      document.getElementById('btn-play').textContent = 'â–¶ Reprendre la lecture';
      document.getElementById('btn-play').onclick = startMusic;
    } else {
      audio.play();
      musicPlaying = true;
      document.getElementById('music-toggle').textContent = 'ğŸµ';
      document.getElementById('btn-play').textContent = 'â¸ En cours de lecture';
      document.getElementById('btn-play').onclick = toggleMusic;
    }
  }

  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let selectedCity = '';
  let selectedActivity = '';
  let bonusAnswers = { energie: '', ambiance: '', cuisine: '', soir: '' };

  // â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function goTo(id) {
    if (id === 's5') {
      const dateVal = document.getElementById('date-input').value;
      if (dateVal) {
        const d = new Date(dateVal + 'T12:00:00');
        document.getElementById('sum-date').textContent =
          d.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
      }
      document.getElementById('sum-city').textContent = selectedCity || 'â€”';
      if (selectedActivity === 'Moi je dÃ©cide ğŸ˜') {
        document.getElementById('sum-activity').textContent = 'Moi je dÃ©cide ğŸ˜';
        const bonusEl = document.getElementById('sum-bonus');
        if (bonusEl) {
          bonusEl.style.display = 'block';
          document.getElementById('sum-energie').textContent = bonusAnswers.energie;
          document.getElementById('sum-ambiance').textContent = bonusAnswers.ambiance;
          document.getElementById('sum-cuisine').textContent = bonusAnswers.cuisine;
          document.getElementById('sum-soir').textContent = bonusAnswers.soir;
        }
      } else {
        document.getElementById('sum-activity').textContent = selectedActivity || 'â€”';
      }
    }
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0, 0);
  }

  function handleActivity() {
    if (selectedActivity === 'Moi je dÃ©cide ğŸ˜') {
      goTo('s4b');
    } else {
      goTo('s5');
    }
  }

  // â”€â”€ Petals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const emojis = ['ğŸŒ¸', 'ğŸŒ·', 'ğŸŒº', 'âœ¿', 'â€'];
  const container = document.getElementById('petals');
  for (let i = 0; i < 18; i++) {
    const p = document.createElement('div');
    p.className = 'petal';
    p.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDuration = (6 + Math.random() * 8) + 's';
    p.style.animationDelay = (Math.random() * 10) + 's';
    p.style.fontSize = (0.8 + Math.random() * 0.8) + 'rem';
    container.appendChild(p);
  }

  // â”€â”€ Date input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('date-input').addEventListener('change', function() {
    document.getElementById('btn2').disabled = !this.value;
  });

  // â”€â”€ City selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function selectCity(el, value) {
    document.querySelectorAll('#city-options .option-card').forEach(c => c.classList.remove('selected'));
    el.classList.add('selected');
    selectedCity = value;
    document.getElementById('btn3').disabled = false;
  }

  // â”€â”€ Activity selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function selectActivity(el, value) {
    document.querySelectorAll('#activity-options .option-card').forEach(c => c.classList.remove('selected'));
    el.classList.add('selected');
    selectedActivity = value;
    document.getElementById('btn4').disabled = false;
  }

  // â”€â”€ Restart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function restart() {
    selectedCity = '';
    selectedActivity = '';
    bonusAnswers = { energie: '', ambiance: '', cuisine: '', soir: '' };
    document.getElementById('date-input').value = '';
    document.getElementById('btn2').disabled = true;
    document.getElementById('btn3').disabled = true;
    document.getElementById('btn4').disabled = true;
    document.getElementById('btn4b').disabled = true;
    document.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
    document.getElementById('sum-bonus').style.display = 'none';
    goTo('s1'); document.getElementById('btn-play').textContent = 'â–¶ Appuyer pour lire'; document.getElementById('btn-play').onclick = startMusic; document.getElementById('song-label').textContent = '';
  }

  // â”€â”€ Bonus questions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function selectBonus(key, el, value) {
    document.querySelectorAll('#q-' + key + ' .option-card').forEach(c => c.classList.remove('selected'));
    el.classList.add('selected');
    bonusAnswers[key] = value;
    if (bonusAnswers.energie && bonusAnswers.ambiance && bonusAnswers.cuisine && bonusAnswers.soir) {
      document.getElementById('btn4b').disabled = false;
    }
  }
</script>
</body>
</html>
